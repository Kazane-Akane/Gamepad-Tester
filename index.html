<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamepad Tester</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Gamepad Tester</h1>
    <p class="description">
        请连接您的游戏手柄并按下任意键以开始
    </p>
    
    <div id="device-tabs-container" class="tabs-container"></div>
    
    <div class="main-content">
        <div id="gamepad-svg-container" class="gamepad-svg-container">
            <div class="gamepadView">
                <svg width="100%" viewBox="0 0 441 383" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d6ef606e="" class="">
                    <g id="XBox" data-v-d6ef606e="">
                        <path id="LOutline" d="M220.5 294.5C220.5 294.5 195 294.5 150 294.5C105 294.5 81.5 378.5 49.5 378.5C17.5 378.5 4 363.9 4 317.5C4 271.1 43.5 165.5 55 137.5C66.5 109.5 95.5 92.0001 128 92.0001C154 92.0001 200.5 92.0001 220.5 92.0001" stroke="hsl(210,50%,85%)" stroke-width="3" stroke-opacity="1" fill="#587a9b" data-v-d6ef606e=""></path>
                        <path id="ROutline" d="M220 294.5C220 294.5 245.5 294.5 290.5 294.5C335.5 294.5 359 378.5 391 378.5C423 378.5 436.5 363.9 436.5 317.5C436.5 271.1 397 165.5 385.5 137.5C374 109.5 345 92.0001 312.5 92.0001C286.5 92.0001 240 92.0001 220 92.0001" stroke="hsl(210,50%,85%)" stroke-width="3" stroke-opacity="1" fill="#587a9b" data-v-d6ef606e=""></path>
                        <circle id="LStickOutline" cx="113" cy="160" r="37.5" stroke="hsl(210,50%,85%)" stroke-opacity="1" stroke-width="3" data-v-d6ef606e=""></circle>
                        <line x1="113" y1="122.5" x2="113" y2="197.5" stroke="rgba(198, 217, 236, 0.5)" stroke-width="1.5"></line>
                        <line x1="75.5" y1="160" x2="150.5" y2="160" stroke="rgba(198, 217, 236, 0.5)" stroke-width="1.5"></line>
                        <circle id="LeftStick" cx="112.62517738612955" cy="160.46857404440377" r="28" fill="rgba(255, 255, 255,0)" stroke="rgba(198, 217, 236,1)" stroke-width="3" data-v-d6ef606e=""></circle>
                        <circle id="RStickOutline" cx="278" cy="238" r="37.5" stroke="hsl(210,50%,85%)" stroke-opacity="1" stroke-width="3" data-v-d6ef606e=""></circle>
                        <line x1="278" y1="200.5" x2="278" y2="275.5" stroke="rgba(198, 217, 236, 0.5)" stroke-width="1.5"></line>
                        <line x1="240.5" y1="238" x2="315.5" y2="238" stroke="rgba(198, 217, 236, 0.5)" stroke-width="1.5"></line>
                        <circle id="RightStick" cx="278.0001831082628" cy="237.99981689173723" r="28" fill="rgba(255, 255, 255,0)" stroke="rgba(198, 217, 236,1)" stroke-width="3" data-v-d6ef606e=""></circle>
                        <circle id="DOutline" cx="166" cy="238" r="37.5" stroke="hsl(210,50%,85%)" stroke-opacity="1" stroke-width="3" data-v-d6ef606e=""></circle>
                        <circle stroke="hsl(210,50%,85%)" stroke-width="3" r="37.5" cy="160" cx="329" id="BOutline" data-v-d6ef606e=""></circle>
                        <g id="LMetaGroup" stroke-width="3" stroke="hsl(210,50%,85%)" fill="white" data-v-d6ef606e=""><circle id="LMeta" cx="199.83333" cy="162.33333" r="10" fill="#fff" stroke="rgba(198, 217, 236,1)" stroke-width="3" data-v-d6ef606e=""></circle></g>
                        <rect id="L1" rx="6.5" y="66.83335" x="116.83332" height="17.00004" width="43.33334" fill="#587a9b" stroke="rgba(198, 217, 236,1)" stroke-width="3" data-v-d6ef606e=""></rect>
                        <rect id="R1" rx="6.5" height="17.00003" width="42.66666" y="67" x="281.33334" fill="#587a9b" stroke="rgba(198, 217, 236,1)" stroke-width="3" data-v-d6ef606e=""></rect>
                        <path id="L2" d="m152.5,52.9702c0,4.61877 -3.358,8.36308 -7.5,8.36308l-13,0c-4.142,0 -7.5,-3.74432 -7.5,-8.36308l0,-22.8591c0,-8.62177 6.268,-15.6111 14,-15.6111c7.732,0 14,6.98932 14,15.6111l0,22.8591z" fill="rgba(9, 105, 150,0)" stroke="rgba(198, 217, 236,1)" stroke-width="3" data-v-d6ef606e=""></path>
                        <path id="R2" d="m316.83334,53.44044c0,4.6352 -3.43795,8.39285 -7.67857,8.39285l-13.30953,0c-4.24062,0 -7.67857,-3.75765 -7.67857,-8.39285l0,-22.94046c0,-8.65246 6.41724,-15.66665 14.33334,-15.66665c7.9161,0 14.33334,7.0142 14.33334,15.66665l0,22.94046l-0.00001,0z" fill="rgba(9, 105, 150,0)" stroke="rgba(198, 217, 236,1)" stroke-width="3" data-v-d6ef606e=""></path>
                        <line y2="302.5" x2="126.00001" y1="214.49998" x1="27.50001" stroke-width="3" stroke="hsl(210,50%,85%)" data-v-d6ef606e=""></line>
                        <line stroke="hsl(210,50%,85%)" id="svg_14" stroke-width="3" y2="295.73418" x2="410.73581" y1="200.43247" x1="306.59558" fill="white" transform="rotate(89 358.666 248.083)" data-v-d6ef606e=""></line>
                        <path id="BLeft" stroke-width="3" opacity="undefined" transform="rotate(90 310.081 161.999)" fill="#fff" stroke="rgba(198, 217, 236,1)" d="m310.08129,171.99862c-5.57089,0 -10.08331,-4.52112 -10.08331,-10.10275c0,-5.58163 4.51242,-9.89721 10.08331,-9.89721c5.57089,0 10.08331,4.31558 10.08331,9.89721c0,5.58163 -4.51242,10.10275 -10.08331,10.10275z" data-v-d6ef606e=""></path>
                        <path id="BTop" stroke-width="3" opacity="undefined" transform="rotate(90 329.081 140.331)" fill="#fff" stroke="rgba(198, 217, 236,1)" d="m329.08146,150.33176c-5.57089,0 -10.08331,-4.52112 -10.08331,-10.10275c0,-5.58163 4.51242,-9.89721 10.08331,-9.89721c5.57089,0 10.08331,4.31558 10.08331,9.89721c0,5.58163 -4.51242,10.10275 -10.08331,10.10275z" data-v-d6ef606e=""></path>
                        <path id="BRight" stroke-width="3" opacity="undefined" transform="rotate(90 348.415 161.332)" fill="#fff" stroke="rgba(198, 217, 236,1)" d="m348.41497,171.33195c-5.57089,0 -10.08331,-4.52112 -10.08331,-10.10275c0,-5.58163 4.51242,-9.89721 10.08331,-9.89721c5.57089,0 10.08331,4.31558 10.08331,9.89721c0,5.58163 -4.51242,10.10275 -10.08331,10.10275z" data-v-d6ef606e=""></path>
                        <path id="BBottom" stroke-width="3" opacity="undefined" transform="rotate(90 330.081 180.665)" fill="#fff" stroke="rgba(198, 217, 236,1)" d="m330.08147,190.66546c-5.57089,0 -10.08331,-4.52112 -10.08331,-10.10275c0,-5.58163 4.51242,-9.8972 10.08331,-9.8972c5.57089,0 10.08331,4.31557 10.08331,9.8972c0,5.58163 -4.51242,10.10275 -10.08331,10.10275z" data-v-d6ef606e=""></path>
                        <g stroke-width="3" stroke="hsl(210,50%,85%)" fill="white" id="svg_42" opacity="0.95" data-v-d6ef606e=""><circle id="RMeta" r="10" cy="162.16667" cx="241" fill="#fff" stroke="rgba(198, 217, 236,1)" stroke-width="3" data-v-d6ef606e=""></circle></g>
                        <rect id="DUp" height="19.83327" width="14.3333" y="211.6656" x="159.16565" fill="#fff" stroke="rgba(198, 217, 236,1)" stroke-width="3" data-v-d6ef606e=""></rect>
                        <path id="DDown" fill="#fff" stroke="rgba(198, 217, 236,1)" stroke-width="3" d="m159.16565,243.83218l14.33329,0l0,19.83327l-14.33329,0l0,-19.83327z" opacity="undefined" data-v-d6ef606e=""></path>
                        <path id="DLeft" transform="rotate(-90 149.291 237.999)" fill="#fff" stroke="rgba(198, 217, 236,1)" stroke-width="3" d="m142.12405,228.29057l14.33329,0l0,19.4166l-14.33329,0l0,-19.4166z" opacity="undefined" data-v-d6ef606e=""></path>
                        <rect id="DRihgt" transform="rotate(-90 183.707 238.207)" height="19.58328" width="14.08329" y="228.41556" x="176.66562" fill="#fff" stroke="rgba(198, 217, 236,1)" stroke-width="3" data-v-d6ef606e=""></rect>
                        <path id="svg_9" d="m164.24577,236.99529" opacity="NaN" stroke-width="3" stroke="hsl(210,50%,85%)" data-v-d6ef606e=""></path>
                        <rect stroke="hsl(210,50%,85%)" id="svg_10" height="8.33324" width="10.41655" y="235.07865" x="162.32912" stroke-width="3" data-v-d6ef606e=""></rect>
                        <rect id="svg_11" height="2.49997" width="4.49995" y="236.74529" x="164.24577" stroke-width="3" stroke="hsl(210,50%,85%)" data-v-d6ef606e=""></rect>
                        <rect id="svg_12" height="8.6666" width="11.33325" y="232.49689" x="160.16389" stroke-width="3" stroke="hsl(210,50%,85%)" data-v-d6ef606e=""></rect>
                    </g>
                </svg>
            </div>
            
            <div class="test-area test-area-centered">
                <div class="test-section">
                    <h3>扳机测试</h3>
                    <div class="trigger-values">
                        <div class="trigger-group">
                            <span class="label">LT:</span>
                            <progress id="L2-progress" value="0" max="255"></progress>
                            <span id="L2-value">0</span>
                        </div>
                        <div class="trigger-group">
                            <span class="label">RT:</span>
                            <progress id="R2-progress" value="0" max="255"></progress>
                            <span id="R2-value">0</span>
                        </div>
                    </div>
                </div>

                <div class="test-section">
                    <h3>震动测试</h3>
                    <div class="vibration-controls">
                        <div class="vibration-left">
                            <h4>左震动 (强震)</h4>
                            <div class="vibration-group">
                                <label for="rumble-L">强度 (0-1):</label>
                                <input type="range" id="rumble-L" min="0" max="1" step="0.1" value="1">
                                <span id="rumble-value-L">1.0</span>
                            </div>
                            <div class="vibration-group">
                                <label for="duration-L">时间 (ms):</label>
                                <input type="number" id="duration-L" value="2000" min="0">
                            </div>
                            <button class="vibrate-button-L">左震动</button>
                        </div>
                        <div class="vibration-right">
                            <h4>右震动 (弱震)</h4>
                            <div class="vibration-group">
                                <label for="rumble-R">强度 (0-1):</label>
                                <input type="range" id="rumble-R" min="0" max="1" step="0.1" value="1">
                                <span id="rumble-value-R">1.0</span>
                            </div>
                            <div class="vibration-group">
                                <label for="duration-R">时间 (ms):</label>
                                <input type="number" id="duration-R" value="2000" min="0">
                            </div>
                            <button class="vibrate-button-R">右震动</button>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>

        <div class="test-area">


            <div class="test-section">
                <h3>按键测试</h3>
                <div id="button-status-container" class="button-grid">
                    <div class="button-item">
                        <span class="label">A:</span>
                        <span id="button-0" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">B:</span>
                        <span id="button-1" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">X:</span>
                        <span id="button-2" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">Y:</span>
                        <span id="button-3" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">LB:</span>
                        <span id="button-4" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">RB:</span>
                        <span id="button-5" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">LT:</span>
                        <span id="button-6" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">RT:</span>
                        <span id="button-7" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">L3:</span>
                        <span id="button-10" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">R3:</span>
                        <span id="button-11" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">D-Up(上):</span>
                        <span id="button-12" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">D-Down(下):</span>
                        <span id="button-13" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">D-Left(左):</span>
                        <span id="button-14" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">D-Right(右):</span>
                        <span id="button-15" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">SELECT:</span>
                        <span id="button-8" class="button-indicator"></span>
                    </div>
                    <div class="button-item">
                        <span class="label">START:</span>
                        <span id="button-9" class="button-indicator"></span>
                    </div>
                </div>
            </div>

            <div class="test-section">
                <h3>摇杆测试</h3>
                <div class="stick-values">
                    <div class="stick-value-container">
                        <span class="label">左摇杆:</span>
                        <div class="stick-svg-wrapper">
                            <svg class="stick-svg" viewBox="0 0 100 100">
                                <circle class="stick-bg" cx="50" cy="50" r="45"></circle>
                                <line x1="50" y1="5" x2="50" y2="95" stroke="#ccc"></line>
                                <line x1="5" y1="50" x2="95" y2="50" stroke="#ccc"></line>
                                <line id="left-stick-line" x1="50" y1="50" x2="50" y2="50" stroke="#3498db" stroke-width="2" style="display: none;"></line>
                                <circle id="left-stick-visual" class="stick-puck" cx="50" cy="50" r="5"></circle>
                            </svg>
                        </div>
                        <span id="left-stick-value" class="coords">(0.00, 0.00)</span>
                    </div>
                    <div class="stick-value-container">
                        <span class="label">右摇杆:</span>
                        <div class="stick-svg-wrapper">
                            <svg class="stick-svg" viewBox="0 0 100 100">
                                <circle class="stick-bg" cx="50" cy="50" r="45"></circle>
                                <line x1="50" y1="5" x2="50" y2="95" stroke="#ccc"></line>
                                <line x1="5" y1="50" x2="95" y2="50" stroke="#ccc"></line>
                                <line id="right-stick-line" x1="50" y1="50" x2="50" y2="50" stroke="#3498db" stroke-width="2" style="display: none;"></line>
                                <circle id="right-stick-visual" class="stick-puck" cx="50" cy="50" r="5"></circle>
                            </svg>
                        </div>
                        <span id="right-stick-value" class="coords">(0.00, 0.00)</span>
                    </div>
                </div>
                <div class="test-section polling-rate-section">
                    <h3>其他功能</h3>
                    <button id="open-diagnostics-button" class="action-button">轮询率测试</button>
                </div>
            </div>
        </div>
    </div>

    <div id="polling-rate-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>摇杆轮询率测试</h2>
            <p id="modal-countdown">倒计时5秒后，测试将自动开始...</p>
                <div class="polling-settings">
                <label for="sample-count-input">设置采样数:</label>
                <input type="number" id="sample-count-input" value="100" min="10">
            </div>
            <div class="polling-rate-details">
                <div class="polling-rate-summary">
                    <p>最大值: <span id="max-rate">--</span> ms</p>
                    <p>最小值: <span id="min-rate">--</span> ms</p>
                    <p>平均值: <span id="avg-rate">--</span> ms</p>
                    <p>采样数: <span id="sample-count">--</span></p>
                    <p>平均回报率: <span id="avg-rate-hz">--</span> Hz</p>
                </div>
                <h3>测试记录</h3>
                <ul id="polling-records-list" class="records-list">
                    </ul>
            </div>
            <div class="modal-buttons">
                <button id="restart-test-button" class="action-button">重新测试</button>
                <button id="close-modal-button" class="close-button">关闭</button>
            </div>
        </div>
    </div>
        <p class="d_description">
            © 美夜赤月-Key赤月神社 All Rights Reserved (https://github.com/Kazane-Akane)
        </p>
    <script src="script.js"></script>
</body>
</html>